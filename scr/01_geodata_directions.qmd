---
title: "01 geodata exploration"
format: md
editor: visual
---

## Explore directions of from_to formula

```{r, warning=F, include=F}
library(tidyverse)
library(kableExtra)
```

Read data as a table

```{r}
formulas <- read.csv("../data/formulas_table.csv")
glimpse(formulas)
```

N formulas per language

```{r}
formulas %>% 
  count(lang, sort = T)
```

### types

total

```{r}
formulas %>% 
  mutate(type_pair = paste0(from_type, " --> ", to_type)) %>% 
  count(type_pair, sort = T)
```

by language

```{r}
formulas %>% 
  mutate(type_pair = paste0(from_type, " --> ", to_type)) %>% 
  group_by(lang) %>% 
  count(type_pair, sort = T) %>% 
  slice_max(order_by = n, n = 5) %>% 
  ungroup() %>% 
  mutate(type_pair = paste0(type_pair, " (", n, ")")) %>% 
  group_by(lang) %>% 
  mutate(top_list = paste0(type_pair, collapse = " <br> ")) %>% 
  select(-n, -type_pair) %>% 
  ungroup() %>% 
  distinct() %>% 
  #pivot_wider(names_from = lang, values_from = top_list) %>% 
  knitr::kable(escape = F)
```
